/**
 * Populate git commit and branch metadata for inspection at http://spring.io/info.
 * See http://projects.spring.io/spring-boot/docs/spring-boot-actuator/docs/Features.html ("Info Endpoint")
 */
task writeGitPropertiesFile(dependsOn: rootProject.gitMetadata) << {
    new Properties(
            'git.branch' : rootProject.gitMetadata.branch,
            'git.commit.id' : rootProject.gitMetadata.commitId,
            'git.commit.time' : rootProject.gitMetadata.commitTime
    ).store(new FileWriter(file("${sourceSets.main.output.resourcesDir}/git.properties")),
            "Written by the '${it.name}' Gradle build task")
}
processResources.finalizedBy writeGitPropertiesFile
