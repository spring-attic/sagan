/**
 * Modify the `processResources` task to write git commit and branch metadata for inspection at http://spring.io/info.
 * See http://projects.spring.io/spring-boot/docs/spring-boot-actuator/docs/Features.html ("Info Endpoint")
 */
processResources.dependsOn rootProject.gitMetadata
processResources.doLast {
    new Properties(
            'git.branch' : rootProject.gitMetadata.branch,
            'git.commit.id' : rootProject.gitMetadata.commitId,
            'git.commit.time' : rootProject.gitMetadata.commitTime
    ).store(new FileWriter(file("${sourceSets.main.output.resourcesDir}/git.properties")),
            "Written by the '${it.name}' Gradle build task")
}
