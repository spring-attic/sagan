<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorator="layout"
  data-clipboard-buttons
  data-code-sidebar
  data-code-prettify
  data-hide-show-guide
  data-sts-import>
  <head>
    <title th:inline="text">[[${guide.typeLabel}]] &middot; [[${guide.title}]]</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/gsguide.css}"/>

    <!-- http://opengraphprotocol.org/ -->
    <meta property="og:title" th:content="${guide.title}" />
    <meta property="og:image" th:content="@{/img/spring-by-pivotal.png}" />
    <meta property="og:description" th:content="${description}" />

    <script th:unless="${#strings.isEmpty(guide.deployToPwsUrl)}" type="application/javascript" th:src="@{/pws/pws-1.0.0.min.js}"></script>
  </head>
  <body>
    <div layout:fragment="header-container"></div>
    <div layout:fragment="content" class="container-fluid">
      <main class="main-body--wrapper">
        <div class="row-fluid">
          <div class="span8 mobile-left-pane">
            <div class="content--title desktop-only" th:text="${guide.typeLabel}">
              Getting Started
            </div>
            <article class="content--container">
          <h1 class="title" th:text="${guide.title}"></h1>
          <div class="article-body" th:utext="${guide.content}">a Guide</div>
            </article>
          </div>
          <aside id='sidebar' class="span4 content-right-pane--container mobile-left-pane">
            <a th:href="${guide.ciLatestUrl}" class="ci-status desktop-only">
              <img th:src="${guide.ciStatusImageUrl}"/>
            </a>
            <div class="right-pane-widget--container desktop-only">
              <div class="github-actions https">
                <h2>Get the Code</h2>
                <div class="btn-group">
                  <button class="btn" data-protocol="https">HTTPS</button>
                  <button class="btn" data-protocol="ssh">SSH</button>
                  <button class="btn" data-protocol="subversion">Subversion</button>
                </div>
                <div class="clone-url https">
                  <input type="text" id="clone-url-https" th:value="${guide.gitRepoHttpsUrl}" readonly="readonly"/>
                  <button class="copy-button github" th:attr="data-clipboard-text=${guide.gitRepoHttpsUrl}" data-toggle="tooltip"></button>
                </div>
                <div class="clone-url ssh">
                  <input type="text" id="clone-url-ssh" th:value="${guide.gitRepoSshUrl}" readonly="readonly"/>
                  <button class="copy-button github" th:attr="data-clipboard-text=${guide.gitRepoSshUrl}" data-toggle="tooltip"></button>
                </div>
                <div class="clone-url subversion">
                  <input type="text" id="clone-url-subversion" th:value="${guide.gitRepoSubversionUrl}" readonly="readonly"/>
                  <button class="copy-button github" th:attr="data-clipboard-text=${guide.gitRepoSubversionUrl}" data-toggle="tooltip"></button>
                </div>
                <a class="github_download btn btn-black uppercase" th:href='${guide.zipUrl}'>Download ZIP</a>
                <a class="gs-guide-import" th:href="${guide.githubHttpsUrl}">Import into STS</a>
                <div th:unless="${#strings.isEmpty(guide.deployToPwsUrl)}" class="deploy-to-pws--container">
                  <a id="deployToPws" href="#"></a>
                </div>
                <div class="go-to-repo--container">
                  <a th:href="${guide.GithubHttpsUrl}">
                    <i class="icon-github"></i>
                    Go To Repo
                  </a>
                </div>
              </div>
            </div>
            <div th:utext="${guide.sidebar}">Container</div>
          </aside>
        </div>
      </main>
      <script th:unless="${#strings.isEmpty(guide.deployToPwsUrl)}" th:inline="javascript" type="application/javascript">
        /*<![CDATA[*/
        var clientId = /*[[${deployToPwsClientId}]]*/ 'spring-io-local';
        var redirectUrl = /*[[${deployToPwsRedirectUrl + '?descriptor=' + #uris.escapeQueryParam(guide.deployToPwsUrl)}]]*/ 'https://localhost:8080/guides/deploy-to-pws';
        PWS.ui(function (rp) {
          rp("#deployToPws").deployButton({
            clientId: clientId,
            redirectUrl: redirectUrl
          });
        });
        /*]]>*/
      </script>
    </div>
  </body>
</html>
